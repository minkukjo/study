<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/study/blog/rss.xml" title="해리의 스터디 저장소 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/study/blog/atom.xml" title="해리의 스터디 저장소 Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="해리의 스터디 저장소" href="/study/opensearch.xml"><title data-react-helmet="true">13. 디플로이먼트 | 해리의 스터디 저장소</title><meta data-react-helmet="true" property="og:url" content="https://minkukjo.github.io/study/docs/kubernetes/15steps/13-deplyoment"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="13. 디플로이먼트 | 해리의 스터디 저장소"><meta data-react-helmet="true" name="description" content="쿠버네티스의 디플로이먼트에 대하여"><meta data-react-helmet="true" property="og:description" content="쿠버네티스의 디플로이먼트에 대하여"><link data-react-helmet="true" rel="shortcut icon" href="/study/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://minkukjo.github.io/study/docs/kubernetes/15steps/13-deplyoment"><link data-react-helmet="true" rel="alternate" href="https://minkukjo.github.io/study/docs/kubernetes/15steps/13-deplyoment" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://minkukjo.github.io/study/docs/kubernetes/15steps/13-deplyoment" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://R6WS6DHCQH-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/study/assets/css/styles.91c094b8.css">
<link rel="preload" href="/study/assets/js/runtime~main.e1824e30.js" as="script">
<link rel="preload" href="/study/assets/js/main.602028bf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/study/"><strong class="navbar__title">Home</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/study/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/study/blog">Blog</a><a class="navbar__item navbar__link" href="/study/portfolio">Portfolio</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/minkukjo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://minkukjo.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/study/"><strong class="navbar__title">Home</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/study/docs/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/study/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/study/portfolio">Portfolio</a></li><li class="menu__list-item"><a href="https://github.com/minkukjo" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://minkukjo.github.io/" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/study/docs/intro">소개</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">15단계로 배우는 쿠버네티스</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/00-intro">00. 스터디 시작의 계기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/01-what-is-k8s">01. 쿠버네티스란 무엇인가</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/02-what-is-container">02. 컨테이너란 무엇인가</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/03-kubernetes-architecture">03. 쿠버네티스의 기본</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/04-docker-command">04. 도커 명령어</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/05-docker-deeper">05. 도커 이해하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/06-dockerfile">06. 컨테이너 개발</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/07-container-network">07. 컨테이너 네트워크</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/08-container-api">08. 컨테이너 API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/09-kubernetes-first-step">09. 쿠버네티스 첫 걸음</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/10-manifest">10. 매니페스트</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/11-service">11. 서비스</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/12-ingress">12. 인그레스</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/study/docs/kubernetes/15steps/13-deplyoment">13. 디플로이먼트</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/14-statefulset">14. 스테이트풀셋</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/15-autoscale">15. 오토스케일</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/16-ingress-deeper">16. 인그레스 기능</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/17-storage">17. 스토리지</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/15steps/18-job">18. Job과 Cron Job</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/study/docs/kubernetes/node-isolation">특정 노드에만 파드 배포하기</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Java</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">이펙티브 자바</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/01-intro">01. 소개</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/02-object-create-destroy">02. 객체 생성 파괴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/03-public-method">03. 모든 객체의 공통 메서드</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/04-class-interface">04. 클래스와 인터페이스</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/05-generic">05. 제네릭</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/06-enum-annotation">06. 이넘 타입과 애너테이션</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/07-lambda-stream">07. 람다와 스트림</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/08-method">08. 메소드</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/java/effective-java/09-programming-rule">09. 일반적인 프로그래밍 원칙</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Kafka</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">카프카 핵심 가이드</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/kafka/kafka-core-guide/03-consumer">03. 카프카 컨슈머</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/kafka/kafka-core-guide/05-internal">05. 카프카의 내부 메커니즘</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/study/docs/kafka/kafka-core-guide/07-data-pipeline">07. 데이터 파이프라인 구축하기</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">13. 디플로이먼트</h1></header><div class="markdown"><blockquote><p>쿠버네티스의 디플로이먼트에 대하여</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="디플로이먼트"></a>디플로이먼트<a class="hash-link" href="#디플로이먼트" title="Direct link to heading">#</a></h2><p>디플로이먼트의 역할에 대해 이해해보자.</p><p>1장에서 언급했듯이 디플로이먼트는 백엔드의 워크로드에 적합한 <strong>컨트롤러</strong>이다.</p><p>디플로이먼트의 주 역할은 파드의 개수를 관리하는 것이다.</p><p>k8s 클러스터에서 파드는 서버의 역할을 담당하며 처리 능력을 높이고 싶다면 <strong>파드의 개수를 늘리면</strong> 된다.</p><p>물론 불필요하게 많은 파드를 구동시키면 CPU와 메모리가 낭비될 수 있으므로 적절히 조절해야한다.</p><p>이처럼 파드의 개수를 관리하는 것은 시스템의 처리 능력과 서비스를 중단하지 않는 가용성, 그리고 비용 측면에서 매우 중요하다.</p><p>디플로이먼트는 요청한 개수만큼 파드를 기동하며 장애 등의 이유로 파드의 개수가 줄어들면 새롭게 파드를 만들어 기동한다.</p><p>그리고 애플리케이션의 버전을 업그레이드할 때 새로운 버전의 파드로 조금씩 바꾸는 기능(롤링 업데이트) 기능도 제공한다.</p><p>그런데 로드밸런서에 해당하는 기능은 디플로이먼트에 포함되지 않는데, 이는 쿠버네티스의 <strong>서비스</strong>라는 오브젝트가 담당하고 있다.</p><p>디플로이먼트는 혼자 동작하지 않고 <strong>레플리카</strong>와 함게 동작한다.</p><p>이 관계는 아래의 그림과 같다.</p><p><img src="https://user-images.githubusercontent.com/43809168/103437408-d5ac1100-4c6a-11eb-910a-823fd93438a2.png" alt="B80Z9"></p><p>레플리카셋은 디플로이먼트의 매니페스트에 적힌 레플리카의 값을 기준으로 파드의 개수를 조절하며 사용자가 직접 조작하는 경우는 거의 없고 주로 상태를 참조한다.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="디플로이먼트-생성과-삭제"></a>디플로이먼트 생성과 삭제<a class="hash-link" href="#디플로이먼트-생성과-삭제" title="Direct link to heading">#</a></h2><p>디플로이먼트를 만들고 지워보자.</p><p>디플로이먼트를 만드는 명렁어는 <code>kubectl apply -f {YAML_파일명}</code>이고 지울 때는 <code>kubectl delete -f {YAML_파일명}</code>이다.</p><p>아래는 디플로이먼트 매니페스트이다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> apps/v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deployment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> web </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 매치 라벨은 디플로이먼트와 파드를 엮을 라벨 명이다.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> web </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 디플로이먼트에 정의된 라벨을 적어준다.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># spec은 template 안에 적어야한다.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;nginx:latest&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 도커허브로부터 이미지를 가져온다.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✘  ~/TestDatas  kubectl apply -f deployment.yml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.apps/web-deploy created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✘  ~/TestDatas  kubectl get deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME         READY   UP-TO-DATE   AVAILABLE   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy   2/3     3            2           10s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl get rs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                    DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9   3         3         3       83s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl get po -o wide</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                          READY   STATUS    RESTARTS   AGE   IP           NODE       NOMINATED NODE   READINESS GATES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-gvg5l   1/1     Running   0          87s   172.17.0.3   minikube   &lt;none&gt;           &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-p7hn8   1/1     Running   0          87s   172.17.0.5   minikube   &lt;none&gt;           &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-sb956   1/1     Running   0          87s   172.17.0.4   minikube   &lt;none&gt;           &lt;none&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>위와 같은 로그를 확인할 수 있다.</p><p>미니쿠베의 경우 단일 노드를 사용하므로 3개의 파드가 같은 노드에 배치된다.</p><p>만약 노드가 여러개라면 k8s 클러스터는 여러 노드에 파드를 분산 배치시킨다.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="스케일-기능"></a>스케일 기능<a class="hash-link" href="#스케일-기능" title="Direct link to heading">#</a></h2><p>스케일 기능은 레플리카의 값을 변경하는 기능을 의미한다.</p><p>레플리카에 명시된 파드의 개수를 조절하여 처리 능력을 높이거나 낮추는 기능이다.</p><p>여기서는 수동으로 변경하는 방법을 사용하지만 CPU 사용량과 연동해서 동적으로 레플리카의 값을 조절하는 오토스케일 기능도 존재한다.</p><p>여기서는 레플리카를 조절하는 두 가지 방법에 대해서 설명할 것이다.</p><p>하나는 <strong>매니페스트를 변경한 후 적용하는 방법</strong>과 <strong>kubectl scale</strong> 명령을 사용하여 파드의 개수를 늘리는 방법, 두 가지 방법이 존재한다.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="매니페스트-변경-후-적용"></a>매니페스트 변경 후 적용<a class="hash-link" href="#매니페스트-변경-후-적용" title="Direct link to heading">#</a></h3><p>이미 배포된 디플로이먼트의 레플리카 값을 변경하여 처리 능력을 올려보자.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> apps/v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deployment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 10으로 증가시켜보았다.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> web</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> web</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;nginx:latest&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl apply -f deployment.yml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.apps/web-deploy configured</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl get po</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                          READY   STATUS    RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-49tf4   1/1     Running   0          33s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-7lj77   1/1     Running   0          33s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-bdjd6   1/1     Running   0          33s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-dsjdh   1/1     Running   0          33s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-gqvw6   1/1     Running   0          33s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-gvg5l   1/1     Running   0          5m40s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-p7hn8   1/1     Running   0          5m40s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-r25ts   1/1     Running   0          33s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-sb956   1/1     Running   0          5m40s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">web-deploy-86cd4d65b9-xlxxr   1/1     Running   0          33s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="스케일-명령어-사용"></a>스케일 명령어 사용<a class="hash-link" href="#스케일-명령어-사용" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✘  ~/TestDatas  kubectl get deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mysql   1/1     1            1           14m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl scale deployment/mysql --replicas=3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.apps/mysql scaled</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl get deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mysql   1/3     3            1           17m</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>디플로이먼트를 통해 늘릴 수 있는 것은 파드의 개수 뿐이다.</p><p>파드의 개수를 늘리는 중에 k8s 클러스터의 자원(CPU, 메모리)이 부족해서 노드를 추가하여 자원이 생길 때 까지 파드 생성이 미뤄진다.</p><p>메모리가 부족한 상황에서 까지 가상 메모리를 사용해 메인 메모리를 페이징하면서 까지 파드를 늘려주지는 않는다고 한다.</p><p>메인 메모리로 파드를 배치할 수 없으면 파드는 생성되지 않는다.</p><p>따라서 파드의 개수를 늘리기 전에 클러스터의 가용 자원을 확인해서 노드 증설을 검토할 필요가 있다.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="실제-서비스-환경에서"></a>실제 서비스 환경에서<a class="hash-link" href="#실제-서비스-환경에서" title="Direct link to heading">#</a></h3><p>이미 배포된 서비스의 경우 CI에서 버저닝이 따지는데 해당 버전의 이미지로 레플리카 수를 조절해볼 수 있을 것 같다.</p><p>가령 트래픽이 증가할 수 있는 상황에서는 따로 빌드-배포를 하지 않고 로컬에서 레플리카 수만 조절하는 것도 가능하지 않을까 싶다.</p><p>그러면 순간적으로 트래픽이 몰리는 시간대를 대비해서 파드 수를 늘려서 처리력을 높일 수 있을 것 같다.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="롤아웃-기능"></a>롤아웃 기능<a class="hash-link" href="#롤아웃-기능" title="Direct link to heading">#</a></h2><p>롤아웃은 쿠버네티스에서 <strong>컨테이너의 업데이트</strong>를 의미한다.</p><p>롤아웃을 할 때는 사용자의 요청을 처리할 수 있도록 정해진 개수만큼 업데이트를 진행할 수 있다.</p><p>쿠버네티스 롤아웃 디폴트 전략은 <strong>RollingUpdateStrategy</strong>를 사용한다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">~/TestDatas  kubectl describe deployment web-deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Name:                   web-deploy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Namespace:              default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CreationTimestamp:      Fri, 01 Jan 2021 22:51:09 +0900</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Labels:                 &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Annotations:            deployment.kubernetes.io/revision: 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        kubectl.kubernetes.io/last-applied-configuration:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          {&quot;apiVersion&quot;:&quot;apps/v1&quot;,&quot;kind&quot;:&quot;Deployment&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;name&quot;:&quot;web-deploy&quot;,&quot;namespace&quot;:&quot;default&quot;},&quot;spec&quot;:{&quot;replicas&quot;:10,...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Selector:               app=web</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Replicas:               10 desired | 10 updated | 10 total | 10 available | 0 unavailable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">StrategyType:           RollingUpdate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MinReadySeconds:        0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RollingUpdateStrategy:  25% max unavailable, 25% max surge // 이 부분 주목</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Pod Template:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Labels:  app=web</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Containers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   nginx:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Image:        nginx:latest</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Port:         &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Host Port:    &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Environment:  &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Mounts:       &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Volumes:        &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Conditions:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Type           Status  Reason</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ----           ------  ------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Progressing    True    NewReplicaSetAvailable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Available      True    MinimumReplicasAvailable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OldReplicaSets:  &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NewReplicaSet:   web-deploy-86cd4d65b9 (10/10 replicas created)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Events:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Type    Reason             Age   From                   Message</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ----    ------             ----  ----                   -------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Normal  ScalingReplicaSet  18m   deployment-controller  Scaled up replica set web-deploy-86cd4d65b9 to 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Normal  ScalingReplicaSet  13m   deployment-controller  Scaled up replica set web-deploy-86cd4d65b9 to 10</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>위 디플로이먼트 상태에서 <code>RollingUpdateStrategy: 25% max unavailable, 25% max surge</code>를 확인할 수 있다.</p><p>최대 25%의 파드를 정지할 수 있고, 최대 25%만큼 초과할 수 있음을 의미한다.</p><p>가령 레필라카 값이 10이면, 최소 파드수는 <code>10-10X0.25=7.5</code>라는 계산식이 나오는데 소수점을 올려 8이 된다.</p><p>초과 파드수는 12.5이므로 13이 된다.</p><p>정리하면 최소 8개의 파드를 유지하면서 최대 13개의 파드가 되도록 롤아웃이 점진적으로 진행된다.</p><p>롤아웃에 의해 종료되는 파드에는 종료 요청 시그널 SIGTERM이 전송된다.</p><p>만약 컨테이너에서 애플리케이션이 이 시그널을 받아 종료 처리를 하지 않으면 30초 후에 SIGKILL에 의해 강제 종료 된다.</p><p>종료 요청을 받은 컨테이너는 더 이상 클라이언트로부터 새로운 요청을 전달받지 않게 된다.</p><p>그리고 종료 시그널을 받은 후 메인 프로세스를 종료시킨다.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="롤백-기능"></a>롤백 기능<a class="hash-link" href="#롤백-기능" title="Direct link to heading">#</a></h2><p>이전 버전의 애플리케이션으로 되돌리는 <strong>Rollback</strong> 기능에 대해 알아보자.</p><p>k8s에서는 아주 간단한 명령어로 롤백을 수행할 수 있다.</p><p><code>kubectl rollout undo deployment web-deploy</code> 한 줄이면 된다.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="파드의-ip-주소가-변경되는-경우와-아닌-경우"></a>파드의 IP 주소가 변경되는 경우와 아닌 경우<a class="hash-link" href="#파드의-ip-주소가-변경되는-경우와-아닌-경우" title="Direct link to heading">#</a></h2><p>파드의 IP 주소는 특정 이벤트에 의해 변할 수도 있고 변하지 않을 수도 있다.</p><p>기본적으로는 가동시에 할당되며 종료 시에 회수되어 다른 파드에 할당된다.</p><p>롤아웃이나 롤백, 스케일에 의해 파드가 종료되고 새롭게 만들어지는 경우라면 새로운 IP 주소가 할당된다고 볼 수 있다.</p><p>한편 파드가 컨테이너의 프로세스가 이상 종료를 한 경우 재시작하여 RESTARTS 값이 증가한 경우라면 파드의 IP 주소는 바뀌지 않는다.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="자동-복구"></a>자동 복구<a class="hash-link" href="#자동-복구" title="Direct link to heading">#</a></h2><p>파드 내의 컨테이너가 모종의 이유로 죽으면, 기본적으로는 파드가 컨테이너를 재구동 시켜준다.</p><p>즉, 파드는 컨테이너 수준의 장애에 대한 복구를 시도한다.</p><p>이에 반해 디플로이먼트의 자동 복구 기능은 파드 단위로 복구한다.</p><p>디플로이먼트는 노드가 중지되더라도 성급하게 복구를 시도하지 않는다.</p><p>노드가 중지하면 디플로이먼트는 5분을 기다리며 거기서 1분이 경과하면 중지된 노드의 파드들의 상태가 <strong>UNKNOWN</strong>으로 바뀐다.</p><p>그리고 동시에 다른 노드에 <strong>UNKNOWN</strong> 상태의 파드만큼 새로운 파드를 실행한다.</p><p>여기서 중지된 노드가 다시 구동하면 그제서야 <strong>UNKNOWN</strong> 상태의 파드를 제거한다.</p><p>이처럼 디플로이먼트의 자동복구 기능은 최대한 신중하게 동작하도록 구성되어있다.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="디플로이먼트를-이용한-고가용성-구성"></a>디플로이먼트를 이용한 고가용성 구성<a class="hash-link" href="#디플로이먼트를-이용한-고가용성-구성" title="Direct link to heading">#</a></h2><p>하나의 파드와 퍼시스턴트 볼륨을 사용하면 고가용성 구성 ( 이하 HA 구성 )을 만들 수 있다.</p><p>파드는 어떤 노드에 있더라도 퍼시스턴트 볼륨을 마운트할 수 있다.</p><p>지금부터는 2개의 노드로 구성된 k8s 클러스터를 생성하고 파드가 배포된 노드를 중지시킨 이후 파드가 이동하는 것을 확인해볼 것이다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud container clusters create test --num-nodes=2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>클러스터 생성 이후 아래의 스크립트로 MySQL 서버와 퍼시스턴트 볼륨을 마운트한 HA 구성을 만들어보자.</p><p>클라이언트에서 접근할 수 있도록 서비스 오브젝트도 만들었다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yml"><div tabindex="0" class="prism-code language-yml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> PersistentVolumeClaim</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> gvol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">accessModes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ReadWriteOnce</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 12Gi</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> apps/v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deployment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> MYSQL_ROOT_PASSWORD</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> qwerty</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token number" style="color:rgb(247, 140, 108)">5.7</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">exec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> mysqladmin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">120</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">timeoutSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3306</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">volumeMounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /var/lib/mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> pvc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token key atrule">subPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">data</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> pvc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">persistentVolumeClaim</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">claimName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> gvol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">dpl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">nodePort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30306</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3306</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mysql</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NodePort</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>배포 이후 MySQL 파드가 어떤 노드에 배포되었는지를 확인해보자</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ✘  ~/TestDatas  kubectl get node</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                  STATUS   ROLES    AGE   VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gke-test-default-pool-a97e525d-6dl1   Ready    &lt;none&gt;   13m   v1.16.15-gke.4901</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gke-test-default-pool-a97e525d-tfdc   Ready    &lt;none&gt;   13m   v1.16.15-gke.4901</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl get pod -o wide</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     READY   STATUS    RESTARTS   AGE   IP           NODE                                  NOMINATED NODE   READINESS GATES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mysql-58665b948b-ndjpd   1/1     Running   0          45s   10.100.1.7   gke-test-default-pool-a97e525d-6dl1   &lt;none&gt;           &lt;none&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>이제 이 노드에 더 이상 새로운 파드가 스케줄 되지 않도록 명령하는 <code>cordon</code> 명령을 사용해보자.</p><p>이 명령은 필수는 아니다. 왜냐하면 <code>drain</code> 명령을 사용하면 <code>cordon</code>도 같이 실행되기 때문이다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl cordon gke-test-default-pool-a97e525d-6dl1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node/gke-test-default-pool-a97e525d-6dl1 cordoned</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>이후 drain 명령을 사용하여 해당 노드에 가동 중인 파드를 다른 노드로 이동시키자.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl drain gke-test-default-pool-a97e525d-6dl1 --ignore-daemonsets</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>파드 이동이 정상적으로 완료되었는지 확인해보자.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl get pod -o wide</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     READY   STATUS    RESTARTS   AGE   IP            NODE                                  NOMINATED NODE   READINESS GATES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mysql-58665b948b-wwgj2   1/1     Running   0          50s   10.100.0.10   gke-test-default-pool-a97e525d-tfdc   &lt;none&gt;           &lt;none&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>MySQL 서버가 정상적으로 다른 노드로 이동한 것을 확인할 수 있다.</p><p>중지 시킨 노드에 다시 파드가 배치될 수 있게 스케줄 금지를 해제해주자.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ~/TestDatas  kubectl uncordon gke-test-default-pool-a97e525d-6dl1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node/gke-test-default-pool-a97e525d-6dl1 uncordoned</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>이처럼 특정 노드의 파드를 전부 클러스터 내의 다른 노드로 옮겨주는 것이 가능하다.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="핵심-요약"></a>핵심 요약<a class="hash-link" href="#핵심-요약" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-디플로이먼트는-서버-타입의-워크로드에-적합한-컨트롤러다"></a>1) 디플로이먼트는 서버 타입의 워크로드에 적합한 컨트롤러다<a class="hash-link" href="#1-디플로이먼트는-서버-타입의-워크로드에-적합한-컨트롤러다" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-디플로이먼트는-스케일-롤아웃-롤ㄹ백-자동-복구라는-네-가지-기능이-있다"></a>2) 디플로이먼트는 스케일, 롤아웃, 롤ㄹ백, 자동 복구라는 네 가지 기능이 있다<a class="hash-link" href="#2-디플로이먼트는-스케일-롤아웃-롤ㄹ백-자동-복구라는-네-가지-기능이-있다" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-스케일을-사용하면-파드의-개수를-늘리거나-줄일-수-있다"></a>3) 스케일을 사용하면 파드의 개수를 늘리거나 줄일 수 있다<a class="hash-link" href="#3-스케일을-사용하면-파드의-개수를-늘리거나-줄일-수-있다" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4-롤아웃과-롤백은-서비스를-유지하면서-파드를-교체한다-이를-위해-애플리케이션의-설계와-구현이-필요하다"></a>4) 롤아웃과 롤백은 서비스를 유지하면서 파드를 교체한다. 이를 위해 애플리케이션의 설계와 구현이 필요하다<a class="hash-link" href="#4-롤아웃과-롤백은-서비스를-유지하면서-파드를-교체한다-이를-위해-애플리케이션의-설계와-구현이-필요하다" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5-자동-복구-기능은-노드-수준에서-장애가-발생했을-때-파드를-복구하는-기능이다"></a>5) 자동 복구 기능은 노드 수준에서 장애가 발생했을 때 파드를 복구하는 기능이다<a class="hash-link" href="#5-자동-복구-기능은-노드-수준에서-장애가-발생했을-때-파드를-복구하는-기능이다" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="6-디플로이먼트-퍼시스턴트-볼륨-서비스-컨트롤러-이-3개를-조합하면-ha-구성이-가능하다"></a>6) 디플로이먼트, 퍼시스턴트 볼륨, 서비스 컨트롤러 이 3개를 조합하면 HA 구성이 가능하다<a class="hash-link" href="#6-디플로이먼트-퍼시스턴트-볼륨-서비스-컨트롤러-이-3개를-조합하면-ha-구성이-가능하다" title="Direct link to heading">#</a></h4><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reference"></a>Reference<a class="hash-link" href="#reference" title="Direct link to heading">#</a></h2><p><img src="https://user-images.githubusercontent.com/43809168/101032998-6684c380-35bd-11eb-8ba7-a784fd46b37a.png" alt="k8s"></p><p>15단계로 배우는 도커와 쿠버네티스 - 타카라 마호 저서</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/minkukjo/study/edit/master/docs/kubernetes/15steps/13-deplyoment.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-05-29T03:52:54.000Z" class="lastUpdatedDate_1WI_">5/29/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/study/docs/kubernetes/15steps/12-ingress"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 12. 인그레스</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/study/docs/kubernetes/15steps/14-statefulset"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">14. 스테이트풀셋 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#디플로이먼트" class="table-of-contents__link">디플로이먼트</a></li><li><a href="#디플로이먼트-생성과-삭제" class="table-of-contents__link">디플로이먼트 생성과 삭제</a></li><li><a href="#스케일-기능" class="table-of-contents__link">스케일 기능</a><ul><li><a href="#매니페스트-변경-후-적용" class="table-of-contents__link">매니페스트 변경 후 적용</a></li><li><a href="#스케일-명령어-사용" class="table-of-contents__link">스케일 명령어 사용</a></li><li><a href="#실제-서비스-환경에서" class="table-of-contents__link">실제 서비스 환경에서</a></li></ul></li><li><a href="#롤아웃-기능" class="table-of-contents__link">롤아웃 기능</a></li><li><a href="#롤백-기능" class="table-of-contents__link">롤백 기능</a></li><li><a href="#파드의-ip-주소가-변경되는-경우와-아닌-경우" class="table-of-contents__link">파드의 IP 주소가 변경되는 경우와 아닌 경우</a></li><li><a href="#자동-복구" class="table-of-contents__link">자동 복구</a></li><li><a href="#디플로이먼트를-이용한-고가용성-구성" class="table-of-contents__link">디플로이먼트를 이용한 고가용성 구성</a></li><li><a href="#핵심-요약" class="table-of-contents__link">핵심 요약</a></li><li><a href="#reference" class="table-of-contents__link">Reference</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Harry's Study, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/study/assets/js/runtime~main.e1824e30.js"></script>
<script src="/study/assets/js/main.602028bf.js"></script>
</body>
</html>