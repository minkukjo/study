---
id: 02-principle
title: 02. 리팩토링 원칙
---

## 리팩토링의 정의

- **"리팩토링하다가 코드가 깨져서 며칠이나 고생했다"**는 말은 리팩토링이 아니다.

- 리팩토링은 언제든 코드가 정상 동작 해야하며, 전체 작업이 끝나지 않더라도 언제든 멈출 수 있다.

- 리팩토링 과정에서 발결된 버그는 리팩토링 후에도 그대로 남아있어야 한다. (단 아무도 발견하지 못한 숨은 버그는 수정해도 된다 ㅋㅋ)

- 리팩토링은 사용자 입장에서 봤을 때 리팩토링 전,후가 같아야한다.

## 두 개의 모자

- 기능을 추가할 때는 기능 추가의 모자를 써야한다.

- 리팩토링을 할 때는 리팩토링의 모자를 써야한다. ( 기능 추가는 절대 하지 않을 것이며, 코드 재구성에만 전념한다. )

## 리팩토링의 이유

- 주기적인 리팩토링은 소프트웨어의 설계를 향상 시킨다.

- 결국은 코드는 인간이 읽기 때문에 인간이 읽기 쉽고 변경에 용이한 구조로 리팩토링 해야한다.

- 마틴 파울러는 게으른 개발자다. 그래서 자신이 작성한 코드를 머리에 넣어두지 않는다. 단 기억할 필요가 있는 것들은 최대한 코드에 남겨둔다.

## 리팩토링하면 버그를 쉽게 찾을 수 있다

- 코드를 이해하기 쉽다는 말은 버그를 찾기 쉽다는 말과 일맥상통한다.

## 리팩토링하면 프로그래밍 속도를 높일 수 있다

- 리팩토링은 코드 개발 속도를 높여준다.

- 새로운 기능을 추가하는데 더 많은 시간이 걸린다면 리팩토링이 필요한 시점이다.

## 리팩토링의 타이밍

- 그러면 언제 리팩토링을 하는 것이 베스트 타이밍일까?

### 리팩토링의 시점

- 마틴파울러의 **3의 법칙**

```
1. 처음에는 무지성으로 그냥 한다.

2. 비슷한 일을 두 번째로 하게 되면(중복이 생겼다는 사실 발견), 일단 계속 진행한다.

3. 비슷한 일을 세 번째 하게 되면 리팩토링 한다.
```

### 기능을 쉽게 추가할 수 있게 만들기

- 함수 매개변수화하기로 중복 줄이기

### 이해하기 쉬운 코드를 위한 리팩토링

- 변수 이름 수정, 함수 이름 수정

- 긴 함수는 잘게 쪼개보기

### 수시로 하는 리팩토링

- 지나가다가 쓰레기를 줍듯이 리팩토링을 한다.

- 오래 걸리는 리팩토링은 체크해두었다가 나중에 한다.

### 오래 걸리는 리팩토링

- 대규모 리팩토링은 일부를 조금씩 개선하자.

- 각 잡고 전체 개발자들이 달려들어서 리팩토링을 하는 짓은 좋지않다.

### 코드 리뷰에 리팩토링 활용하기

- 코드 리뷰를 정기적으로 수행해서 깔끔한 코드 퀄리티를 유지하게 한다.

- Pull Request 기반의 코드리뷰 보다는, 코드 작성자를 옆에 앉혀놓고 코드를 보며 이야기 하면서 리팩토링하는 짝 프로그래밍이 더 좋다.

### 관리자에겐 뭐라고 하지?

- 프로 소프트웨어 개발자는 효과적인 소프트웨어를 최대한 빨리 만드는 것이다.

- 리팩토링은 소프트웨어를 빠르게 만드는데 아주 효과적이다.

- 프로 개발자에게 주어진 임무는 새로운 기능을 빠르게 구현하는 것이고, 가장 빠른 방법은 리팩토링이다.

### 리팩토링을 하지 말아야할 때

- 호출해서 쓰는 코드라면 너저분하더라도 굳이 리팩토링 하지 않는다.

## 리팩토링 시 고려할 문제들

- 리팩토링은 만병통치약이 아니다. 리팩토링에 딸려오는 문제들도 있다.

### 새 기능 개발 속도 저하

-

## Reference

<img width="620" alt="스크린샷 2021-08-31 오후 10 29 39" src="https://user-images.githubusercontent.com/43809168/131528140-3f6f8492-1dee-4f94-b5b6-929136cd2686.jpeg"/>

- Refactoring 2판 ( 저자 : 마틴 파울러 )
